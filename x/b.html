<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List with Auto-Focus Memory</title>
    <style>
        * {
            font-size: 18px;
            font-family:  sans-serif;
        }
        
        
        .list-section {
            margin-bottom: 30px;
        }
        
        
        
        .list-item {
            padding: 8px 12px;
            background-color: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #333;
            position: relative;
        }
        
        .list-item:hover {
            background-color: #e9ecef;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        /* Highlight for last clicked item */
        .list-item.last-clicked {
            background-color: #fff9c4 !important;
            border-color: #ffd54f !important;
            font-weight: bold;
            box-shadow: 0 0 0 3px rgba(255, 213, 79, 0.3);
            animation: pulse 2s infinite;
            position: relative;
            z-index: 10;
        }
        
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 213, 79, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 213, 79, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 213, 79, 0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .status-area {
            background-color: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-top: 30px;
            border: 1px solid #e9ecef;
        }
        
        .status-area h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        #url-display {
            background-color: white;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            word-break: break-all;
            border: 1px solid #ced4da;
            margin-top: 10px;
            font-size: 0.95rem;
            display: none;
            max-height: 100px;
            overflow-y: auto;
        }
        
        .cookie-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #f1f8e9;
            border-radius: 6px;
            border: 1px solid #c5e1a5;
            font-size: 0.95rem;
        }
        
        /* Scrollbar styling */
        .list::-webkit-scrollbar {
            width: 8px;
        }
        
        .list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .list::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        .list::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>
                <ol class="list" id="itemList">
                    <!-- List items will be generated by JavaScript -->
                </ol>

            

<script  src="./b.js"></script>
    <script>

        
        // Base URL
        const baseUrl = "https://chatgpt.com/";
        
        // Cookie name
        const cookieName = "lastClickedItem";
        
        // Function to set a cookie
        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + d.toUTCString();
            document.cookie = name + "=" + encodeURIComponent(value) + ";" + expires + ";path=/";
        }
        
        // Function to get a cookie value
        function getCookie(name) {
            const cookieArr = document.cookie.split(";");
            
            for(let i = 0; i < cookieArr.length; i++) {
                const cookiePair = cookieArr[i].split("=");
                
                if(name === cookiePair[0].trim()) {
                    return decodeURIComponent(cookiePair[1]);
                }
            }
            
            return null;
        }
        
        // Function to delete a cookie
        function deleteCookie(name) {
            document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        }
        
        // Function to focus on the last clicked item
        function focusOnLastClickedItem() {
            const lastClicked = getCookie(cookieName);
            
            if (lastClicked) {
                // Remove previous highlights
                const listItems = document.querySelectorAll('.list-item');
                listItems.forEach(item => {
                    item.classList.remove('last-clicked');
                });
                
                // Find and highlight the item that matches the cookie value
                listItems.forEach(item => {
                    if (item.textContent === lastClicked) {
                        item.classList.add('last-clicked');
                        
                        // Scroll the item into view with smooth animation
                        setTimeout(() => {
                            item.scrollIntoView({
                                behavior: 'smooth',
                                block: 'center',
                                inline: 'center'
                            });
                            
                            
                            // Add a slight pulse effect for emphasis
                            item.style.animation = 'pulse 1.5s ease-in-out';
                        }, 300); // Small delay to ensure DOM is ready
                    }
                });
            } else {
                document.getElementById('cookie-info').innerHTML = 
                    `<strong>Cookie Status:</strong> No item has been clicked yet. Click an item to save it in a cookie.`;
            }
        }
        
        // Function to handle item click
        function handleItemClick(itemName) {
            // Save the clicked item in a cookie (expires in 30 days)
            setCookie(cookieName, itemName, 30);
            
         queryParam = `Show the summary of the book "${itemName}".
 After that ask me to give one of the below choice numbers:
1. Introduction to the author. Wikipedia URL will be included for the author if available.
2. Longer summary of the book. Wikipedia URL will be included for the book if available.
3. Chapter by chapter summary of the book`;

            // Create the query parameter
            queryParam = `?q=${queryParam}`;
            
            // Construct the full URL
            const fullUrl = baseUrl + queryParam;
            
            // Highlight the clicked item
            const listItems = document.querySelectorAll('.list-item');
            listItems.forEach(item => {
                item.classList.remove('last-clicked');
            });
            
            // Add highlight class to the clicked item
            event.currentTarget.classList.add('last-clicked');
            
            // Scroll the clicked item into view
            event.currentTarget.scrollIntoView({
                behavior: 'smooth',
                block: 'center',
                inline: 'center'
            });
     
            // In a real implementation, you would open the URL
            // Uncomment the line below to actually navigate to the URL:
            window.location = fullUrl;
        }
        
        // Function to clear the last clicked item
        function clearLastClicked() {
            deleteCookie(cookieName);
            
            // Remove highlights
            const listItems = document.querySelectorAll('.list-item');
            listItems.forEach(item => {
                item.classList.remove('last-clicked');
            });
            
            // Update cookie info
            document.getElementById('cookie-info').innerHTML = 
                `<strong>Cookie Status:</strong> Cookie cleared. No item is highlighted.`;
            
            // Hide URL display
            document.getElementById('url-display').style.display = 'none';
            
            alert("Last clicked item has been cleared from cookie.");
        }
        
        // Function to reload the page
        function reloadPage() {
            window.location.reload();
        }
        
        // Function to populate the list
        function populateList() {
            const listContainer = document.getElementById('itemList');
            
            items.forEach(item => {
                const listItem = document.createElement('li');
                listItem.className = 'list-item';
                listItem.textContent = item;
                listItem.onclick = (event) => handleItemClick(item, event);
                
                listContainer.appendChild(listItem);
            });
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            populateList();
            
            // Wait a bit for DOM to fully render, then focus on last clicked item
            setTimeout(() => {
                focusOnLastClickedItem();
            }, 100);
            
            // Show current cookie value in console for debugging
            console.log("Current cookie value:", getCookie(cookieName));
        });
        
        // Also check for cookie changes when window gains focus
        window.addEventListener('focus', function() {
            setTimeout(() => {
                focusOnLastClickedItem();
            }, 100);
        });
    </script>
</body>
</html>